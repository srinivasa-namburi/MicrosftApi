@page "/docs/{DocumentId:guid}"
@page "/docs/{DocumentId:guid}/{FromGeneration:bool}"
@using Microsoft.Greenlight.Shared.Configuration

@inject IConfigurationApiClient ConfigurationApiClient

@code {
    [Parameter] public Guid DocumentId { get; set; }
    [Parameter] public bool FromGeneration { get; set; }
}

@if (DocumentId != Guid.Empty)
{
    <GeneratedDocumentDisplay DocumentId="@DocumentId" FromGeneration="@FromGeneration" EnableReferenceFrontend="@EnableReferenceFrontend" />
}

@code
{
    private Guid generatedDocumentIdGuid { get; set; }
    private bool EnableReferenceFrontend { get; set; } = false;
    private ServiceConfigurationOptions.GreenlightServicesOptions.FeatureFlagsOptions? _featureFlags;

    protected override async Task OnInitializedAsync()
    {
        _featureFlags = await ConfigurationApiClient.GetFeatureFlagsAsync();
        if (_featureFlags != null)
        {
            EnableReferenceFrontend = _featureFlags.EnableReferenceFrontend;
        }
    }
}