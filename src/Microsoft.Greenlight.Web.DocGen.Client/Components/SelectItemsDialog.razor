@using System.Collections.Generic

<MudDialog>
    <DialogContent>
        <MudText>Select @SelectionLabel to associate:</MudText>
        
        <MudList T="object" Dense="true" Clickable="true">
            @foreach (var item in Items)
            {
                <MudListItem T="object">
                    <MudCheckBox T="bool" @bind-Value="item.IsSelected" Color="Color.Primary">
                        @item.Name
                    </MudCheckBox>
                </MudListItem>
            }
        </MudList>
    </DialogContent>
    <DialogActions>
        <MudButton OnClick="Cancel">Cancel</MudButton>
        <MudButton Color="Color.Primary" OnClick="Submit">Associate Selected</MudButton>
    </DialogActions>
</MudDialog>

@code {
    [CascadingParameter] IMudDialogInstance MudDialog { get; set; } = null!;
    [Parameter] public string Title { get; set; } = "Select Items";
    [Parameter] public string SelectionLabel { get; set; } = "Items";
    [Parameter] public List<PluginDocumentProcessAssociationManager.SelectableItem> Items { get; set; } = new();

    private void Submit()
    {
        MudDialog.Close(DialogResult.Ok(Items));
    }

    private void Cancel()
    {
        MudDialog.Cancel();
    }
}