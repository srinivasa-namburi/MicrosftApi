<Project Sdk="Microsoft.NET.Sdk.Worker">

	<PropertyGroup>
		<TargetFramework>net9.0</TargetFramework>
		<Nullable>enable</Nullable>
		<ImplicitUsings>enable</ImplicitUsings>
		<UserSecretsId>dotnet-Microsoft.Greenlight.Silo-82897ad0-6e79-456f-9c9b-6af3c4104e50</UserSecretsId>
		<ServerGarbageCollection>true</ServerGarbageCollection>
		<ConcurrentGarbageCollection>true</ConcurrentGarbageCollection>

		<!-- Use custom Dockerfile with MCP execution environment (node, npx, uv, python) -->
		<ContainerImageBuildMethod>Dockerfile</ContainerImageBuildMethod>
		<DockerfilePath>$(MSBuildProjectDirectory)\Dockerfile</DockerfilePath>
		<DockerfileContext>$(MSBuildProjectDirectory)\..\..\..</DockerfileContext>
	</PropertyGroup>

	<ItemGroup>
		<ProjectReference Include="..\Microsoft.Greenlight.Grains.Chat\Microsoft.Greenlight.Grains.Chat.csproj" />
		<ProjectReference Include="..\Microsoft.Greenlight.Grains.Contracts\Microsoft.Greenlight.Grains.Contracts.csproj" />
		<ProjectReference Include="..\Microsoft.Greenlight.Grains.Document\Microsoft.Greenlight.Grains.Document.csproj" />
		<ProjectReference Include="..\Microsoft.Greenlight.Grains.Ingestion\Microsoft.Greenlight.Grains.Ingestion.csproj" />
		<ProjectReference Include="..\Microsoft.Greenlight.Grains.Review\Microsoft.Greenlight.Grains.Review.csproj" />
		<ProjectReference Include="..\Microsoft.Greenlight.Grains.Shared\Microsoft.Greenlight.Grains.Shared.csproj" />
		<ProjectReference Include="..\Microsoft.Greenlight.Grains.Validation\Microsoft.Greenlight.Grains.Validation.csproj" />
		<ProjectReference Include="..\Microsoft.Greenlight.ServiceDefaults\Microsoft.Greenlight.ServiceDefaults.csproj" />
		<ProjectReference Include="..\Microsoft.Greenlight.Shared\Microsoft.Greenlight.Shared.csproj" />
		<ProjectReference Include="..\Plugins\Microsoft.Greenlight.Plugins.Default\Microsoft.Greenlight.Plugins.Default.csproj" />
	</ItemGroup>

	<!-- Ensure tessdata folder (OCR language files) is included in publish output -->
	<ItemGroup>
		<Content Include="tessdata\**\*">
			<CopyToOutputDirectory>Always</CopyToOutputDirectory>
			<CopyToPublishDirectory>Always</CopyToPublishDirectory>
		</Content>
	</ItemGroup>
</Project>
